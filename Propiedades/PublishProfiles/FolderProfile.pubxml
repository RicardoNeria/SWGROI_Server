<?xml version="1.0" encoding="utf-8"?>
<!--
Perfil de publicación estándar de Visual Studio
Este archivo permite usar "Clic derecho -> Publicar" en Visual Studio
Genera una carpeta completa con todos los archivos necesarios para el VPS
-->
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <Configuration>Release</Configuration>
    <Platform>Any CPU</Platform>
    <PublishUrl>publish\</PublishUrl>
    <DeleteExistingFiles>true</DeleteExistingFiles>
    <ExcludeApp_Data>false</ExcludeApp_Data>
    <LaunchSiteAfterPublish>false</LaunchSiteAfterPublish>
    <ExcludeFilesFromDeployment />
    <ExcludeFoldersFromDeployment />
    <PublishFramework>net48</PublishFramework>
    <ProjectGuid>bb4de8cf-7d80-4a30-8e20-afd35e4e0bd2</ProjectGuid>
    <SelfContained>false</SelfContained>
    <_IsPortable>true</_IsPortable>
    <PublishSingleFile>false</PublishSingleFile>
    <PublishReadyToRun>false</PublishReadyToRun>
    <PublishTrimmed>false</PublishTrimmed>
    <WebPublishMethod>FileSystem</WebPublishMethod>
    
    <!-- Configuración crítica para garantizar estructura correcta -->
    <IncludeSetACLProviderOnDestination>false</IncludeSetACLProviderOnDestination>
    <SkipExtraFilesOnServer>false</SkipExtraFilesOnServer>
    <MSDeployPublishMethod>FileSystem</MSDeployPublishMethod>
  </PropertyGroup>
  
  <!-- Asegurar que TODOS los archivos de wwwroot se incluyan -->
  <ItemGroup>
    <_CustomFiles Include="wwwroot\**\*" />
    <FilesForPackagingFromProject Include="%(_CustomFiles.Identity)">
      <DestinationRelativePath>wwwroot\%(RecursiveDir)%(Filename)%(Extension)</DestinationRelativePath>
    </FilesForPackagingFromProject>
  </ItemGroup>
  
  <!-- Incluir archivos de configuración esenciales -->
  <ItemGroup>
    <None Include="app.config">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
  </ItemGroup>
</Project>