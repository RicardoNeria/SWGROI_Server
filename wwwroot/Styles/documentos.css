/* DOCUMENTOS.CSS - versión final y limpia
   Único archivo del módulo, estilo BEM, dependencias en variables globales del sistema
*/

:root{
  --doc-primary:var(--ui-color-primario,#2563eb);
  --doc-gap-sm:0.5rem;
  --doc-gap-md:1rem;
  --doc-gap-lg:1.25rem;
  --doc-radius:var(--ui-radius-base,0.375rem);
  --doc-transition:all 0.15s ease;
  /* Variables adicionales usadas más abajo (normalizar nombres) */
  --documentos-spacing-sm:0.4rem;
  --documentos-spacing-md:0.9rem;
  --documentos-spacing-lg:1.25rem;
  --documentos-spacing-xl:1.75rem;
  --documentos-color-primary:var(--doc-primary);
  --documentos-color-secondary:var(--ui-color-texto-muted,#6b7280);
  --documentos-transition:var(--doc-transition);
  --documentos-font-size:0.90rem;
}

.documentos-container{margin:0 auto;padding:18px 20px;font-size:var(--ui-font-size-base)}
/* Mantener el título principal del módulo más grande que el resto */
.documentos-container > h1,
.documentos-container .module-title,
.documentos-container .documentos-title,
.documentos-container .documento-header-title {
  font-size: 1.4rem;
  font-weight: 700;
}
.documentos-toolbar{display:flex;gap:var(--doc-gap-md);align-items:center;justify-content:space-between;margin-bottom:var(--doc-gap-md)}
.documentos-search{flex:1;min-width:200px}
.documentos-search .ui-form__input{width:100%}
.ui-metrics {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--ui-gap-16);
  margin-bottom: var(--ui-gap-24);
}

.ui-metrics__item {
  background: var(--ui-color-fondo-alt);
  padding: var(--ui-gap-16);
  border-radius: var(--ui-radius-base);
  text-align: center;
  border: 1px solid var(--ui-color-borde);
}

.ui-metrics__title {
  font-size: var(--ui-font-size-sm);
  color: var(--ui-color-texto-muted);
  margin-bottom: var(--ui-gap-8);
  font-weight: 500;
}

.ui-metrics__value {
  font-size: 2rem;
  font-weight: bold;
  color: var(--ui-color-primario);
}
.documentos-filters{display:grid;grid-template-columns:1fr auto;gap:var(--doc-gap-sm) var(--doc-gap-md);align-items:start;margin:0 0 var(--doc-gap-md) 0;background:var(--ui-color-fondo-alt,#fff);border:1px solid var(--ui-color-borde);border-radius:var(--doc-radius);padding:.75rem;overflow-x:auto}
.documentos-filters .ui-filters__form{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
.documentos-filters .ui-filters__input{flex:1 1 180px;min-width:140px;height:44px}
.documentos-filters .ui-filters__select{flex:0 1 120px;min-width:120px;height:44px}
.documentos-filters .ui-actions{align-self:start;margin-left:0;display:flex;gap:var(--ui-gap-6);justify-content:flex-end}
.ui-actions .ui-button + .ui-button{margin-left:var(--ui-gap-6)}
.documentos-filters .ui-actions .ui-button,.documentos-filters .ui-filters__form .ui-button{height:44px;display:inline-flex;align-items:center;padding:0 14px;font-size:0.95rem}

/* Make inputs visually match buttons (vertical alignment and line-height) */
.documentos-filters .ui-filters__input .ui-form__input,
.documentos-filters .ui-filters__input,
.documentos-filters .ui-filters__select,
.documentos-search .ui-form__input { height:44px; line-height:1.15 }

/* Ajuste para que el texto largo en selects (ej. "Categoría: Todas") no se trunque: reducir fuente y padding horizontal */
.documentos-filters .ui-filters__select {
  font-size: 0.92rem;
  padding: 0 10px; /* menos padding horizontal para aumentar espacio disponible */
}

/* Asegurar que el input de búsqueda tenga una fuente ligeramente menor dentro del toolbar */
.documentos-filters .ui-filters__input .ui-form__input {
  font-size: 0.95rem;
  padding: 0 10px;
}

@media (max-width:768px){
  .documentos-filters{grid-template-columns:1fr}
  .documentos-filters .ui-actions{justify-content:flex-start}
}
.ui-tabla--compacta{width:100%;border-collapse:collapse;font-size:1em}
.ui-tabla--compacta th,.ui-tabla--compacta td{padding:0.75rem 1rem;border-bottom:1px solid var(--ui-color-borde)}
.ui-tabla--compacta thead th{font-weight:600;font-size:1em;color:var(--ui-color-texto)}
.ui-tabla__cell--archivo{display:flex;align-items:center;gap:0.5rem}
.ui-tabla__cell--size{font-family:monospace;font-size:1em;color:var(--ui-color-texto-muted)}
/* Botones de acciones modernos en tabla de documentos */
/* Acciones - usar la implementación unificada en componentes.css */
#documentosGrid .ui-tabla__cell--acciones { white-space: nowrap; }
#documentosGrid .ui-tabla__cell--acciones .ui-action { display: inline-flex; }

/* Botón Ver/Descargar - Azul */
#documentosGrid .ui-button:nth-child(1) {
    background: linear-gradient(135deg, #3B82F6, #1D4ED8);
    color: white;
    box-shadow: 0 2px 4px rgba(59, 130, 246, 0.2);
}

/* Botón Descargar - estilo primario compacto */
#documentosGrid .ui-action--download.ui-button--primary {
  background: linear-gradient(135deg, #3B82F6, #1D4ED8);
  color: white;
  box-shadow: 0 2px 4px rgba(59, 130, 246, 0.2);
  border-radius: 8px;
  padding: 0.45rem 0.7rem;
}

#documentosGrid .ui-action--download.ui-button--primary:hover {
  background: linear-gradient(135deg, #2563EB, #1E40AF);
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(59, 130, 246, 0.3);
}

#documentosGrid .ui-button:nth-child(1):hover {
    background: linear-gradient(135deg, #2563EB, #1E40AF);
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(59, 130, 246, 0.3);
}

/* Botón Editar - Verde */
#documentosGrid .ui-button:nth-child(2) {
    background: linear-gradient(135deg, #10B981, #059669);
    color: white;
    box-shadow: 0 2px 4px rgba(16, 185, 129, 0.2);
}

#documentosGrid .ui-button:nth-child(2):hover {
    background: linear-gradient(135deg, #059669, #047857);
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(16, 185, 129, 0.3);
}

/* Botón Eliminar - Rojo */
#documentosGrid .ui-button:nth-child(3),
#documentosGrid .ui-button--danger {
    background: linear-gradient(135deg, #EF4444, #DC2626);
    color: white;
    box-shadow: 0 2px 4px rgba(239, 68, 68, 0.2);
}

#documentosGrid .ui-button:nth-child(3):hover,
#documentosGrid .ui-button--danger:hover {
    background: linear-gradient(135deg, #DC2626, #B91C1C);
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(239, 68, 68, 0.3);
}

/* Efecto de pulso en hover */
#documentosGrid .ui-button::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    transition: width 0.3s ease, height 0.3s ease;
}

#documentosGrid .ui-button:hover::before {
    width: 100%;
    height: 100%;
}

/* Ensure icons use absolute pixel sizing so parent font-size:0 doesn't collapse them */
#documentosGrid .ui-button .ui-button__icon {
  margin: 0;
  font-size: 18px;
  z-index: 1;
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

#documentosGrid .ui-tabla__cell--acciones .ui-action + .ui-action { margin-left: var(--ui-gap-6); }

@media (max-width: 768px){
  /* Botones compactos pero manteniendo el estilo moderno en móviles */
  #documentosGrid .ui-tabla__cell--acciones .ui-action{
    margin-right: 0;
    padding: var(--ui-gap-6);
    min-width: 32px;
    height: 32px;
  }
  /* mobile: use px sizing for icons to keep consistent rendering */
  #documentosGrid .ui-tabla__cell--acciones .ui-action .ui-button__icon{
    font-size: 16px;
  }
}
.tabla-vacia{text-align:center;padding:var(--doc-gap-lg);color:var(--ui-color-texto-muted)}
.tabla-vacia__icon{font-size:2.5rem;margin-bottom:var(--doc-gap-md);opacity:0.6}
.documentos-grid{display:block}
.documento-card{display:flex;gap:var(--doc-gap-sm);align-items:center;padding:var(--doc-gap-sm);border-radius:var(--doc-radius);transition:var(--doc-transition)}
.documento-card:hover{transform:translateY(-2px);box-shadow:var(--ui-shadow-sm)}
.documento-card__icon{width:44px;height:44px;border-radius:6px;display:flex;align-items:center;justify-content:center;background:var(--ui-color-fondo-alt)}
.documento-card__title{font-weight:600;font-size:1em}
.documento-card__description{font-size:1em;color:var(--ui-color-texto-muted)}
.documento-card__meta{display:flex;gap:var(--doc-gap-sm);align-items:center;font-size:1em;color:var(--ui-color-texto-muted)}
.ui-badge--vigente{background:#ecfdf5;color:#065f46;border:1px solid #a7f3d0;padding:0.125rem 0.5rem;border-radius:999px;font-size:1em}
.ui-badge--obsoleto{background:#fff1f2;color:#991b1b;border:1px solid #fca5a5;padding:0.125rem 0.5rem;border-radius:999px;font-size:1em}
/* Botón favorito - estado por defecto y activo */
#documentosGrid .btn-favorito{
  color:var(--ui-color-texto-muted);
  transition:color 0.15s ease, background 0.15s ease, box-shadow 0.12s ease;
  display:inline-flex;align-items:center;justify-content:center;padding:0.25rem 0.45rem;border-radius:6px;border:1px solid transparent;background:transparent;cursor:pointer
}
#documentosGrid .btn-favorito svg{width:14px;height:14px;display:block;fill:currentColor}
/* Activo: dorado/ámbar más visible */
#documentosGrid .btn-favorito--active{
  background: linear-gradient(180deg,#fff7e6,#ffefc2);
  color: #b45309; /* color del icono */
  border: 1px solid rgba(180,83,9,0.12);
  box-shadow: 0 2px 6px rgba(180,83,9,0.06);
}
#documentosGrid .btn-favorito:hover{color:#92400e}
#documentosGrid .btn-favorito--active:hover{background: linear-gradient(180deg,#fff3d6,#fde6a8)}
#documentosGrid .ui-tabla__cell--acciones .btn-favorito:focus{outline:3px solid rgba(250,204,21,0.18);outline-offset:2px}

/* Animación pulse breve al activar/desactivar favorito */
.btn-favorito--pulse{animation:favorito-pulse 0.55s ease-out both}
@keyframes favorito-pulse{
  0% { transform: scale(1); box-shadow: 0 0 0 rgba(180,83,9,0); }
  30% { transform: scale(1.08); box-shadow: 0 6px 18px rgba(180,83,9,0.09); }
  60% { transform: scale(0.99); box-shadow: 0 3px 10px rgba(180,83,9,0.06); }
  100% { transform: scale(1); box-shadow: 0 2px 6px rgba(180,83,9,0.06); }
}
.documentos-dropzone{border:2px dashed var(--ui-color-borde);border-radius:var(--doc-radius);padding:var(--doc-gap-md);text-align:center;cursor:pointer;background:var(--ui-color-fondo)}
.documentos-dropzone.dragover{border-color:var(--doc-primary);background:rgba(37,99,235,0.03)}
.ui-tabla__row[data-id]{background-color:transparent;transition:background-color 0.12s ease}
.ui-tabla__row[data-id]:hover{background:rgba(0,0,0,0.01)}
.documentos-dropzone__icon{font-size:1.6rem;color:var(--doc-primary);margin-bottom:0.4rem}
.documentos-dropzone__input{display:none}

/* Feedback del archivo seleccionado en modal de subida */
#archivoFeedback{color:var(--ui-color-texto-muted);font-size:0.95rem}
#archivoFeedback.ok{color:var(--ui-color-texto-muted)}
#archivoFeedback.uploaded{color:var(--ui-color-primario);font-weight:600}
#archivoFeedback.error{color:var(--ui-color-error);font-weight:600}

/* Módulo Documentos: destacar botón primario y ajustar iconos */
.documentos-filters .ui-button--primary {
  height:44px;
  padding:0 16px;
  font-size:1rem;
  font-weight:600;
  border-radius:8px;
  box-shadow: 0 2px 6px rgba(37,99,235,0.06);
}
.documentos-filters .ui-button--ghost { padding:0 12px; }
.documentos-filters .ui-button__icon { display:inline-flex; align-items:center; justify-content:center; margin-right:8px; font-size:1.05em }

/* Ensure small action buttons in rows keep compact spacing */
.ui-tabla__cell--acciones .ui-button--sm { padding:0.45rem 0.75rem; font-size:0.95rem }
.progreso-subida{background:var(--ui-color-fondo-alt);border-radius:var(--doc-radius);height:8px;overflow:hidden}
.progreso-subida__barra{height:100%;background:linear-gradient(90deg,var(--doc-primary),#6ea0ff);width:0%;transition:width 0.25s ease}
@media (max-width:768px){.ui-metrics{grid-template-columns:repeat(2,1fr)}.ui-tabla__col:nth-child(n+5),.ui-tabla__cell:nth-child(n+5){display:none}.documentos-toolbar{flex-direction:column;align-items:stretch}}
@media (max-width:480px){.ui-metrics{grid-template-columns:1fr}.ui-tabla__col:nth-child(n+4),.ui-tabla__cell:nth-child(n+4){display:none}}
.documento-card:focus-visible,.documentos-dropzone:focus-within{outline:3px solid rgba(37,99,235,0.12);outline-offset:2px}
@keyframes doc-spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}

/* Fin del archivo - versión limpia */
/* ================================
   PAGINACIÓN
   ================================ */
.ui-paginacion{display:flex;align-items:center;justify-content:space-between;gap:.75rem;margin-top:.75rem}
.ui-paginacion__info{color:var(--ui-color-texto-muted)}
.ui-paginacion__controles{display:flex;gap:.5rem}
.documentos-pagination {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: calc(var(--documentos-spacing-sm) * 1.25);
  margin-top: var(--documentos-spacing-lg);
  padding: calc(var(--documentos-spacing-md) * 0.9);
}

.documentos-pagination__button {
  padding: calc(var(--documentos-spacing-sm) * 1.1) calc(var(--documentos-spacing-md) * 1.1);
  border: 1px solid #d1d5db;
  background: #ffffff;
  color: var(--documentos-color-secondary);
  border-radius: 0.5rem;
  cursor: pointer;
  transition: var(--documentos-transition);
  font-size: 0.92rem;
}

.documentos-pagination__button:hover:not(:disabled) {
  border-color: var(--documentos-color-primary);
  color: var(--documentos-color-primary);
}

.documentos-pagination__button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.documentos-pagination__button--active {
  background: var(--documentos-color-primary);
  border-color: var(--documentos-color-primary);
  color: #ffffff;
}

.documentos-pagination__info {
  font-size: 0.92rem;
  color: var(--documentos-color-secondary);
  margin: 0 var(--documentos-spacing-md);
}

/* ================================
   ESTADOS VACÍO Y CARGA
   ================================ */
.documentos-empty,
.documentos-loading {
  text-align: center;
  padding: var(--documentos-spacing-xl) var(--documentos-spacing-md);
  color: var(--documentos-color-secondary);
}

.documentos-empty__icon {
  font-size: 4rem;
  color: #d1d5db;
  margin-bottom: var(--documentos-spacing-lg);
}

.documentos-empty__title {
  font-size: 1.5rem;
  font-weight: 600;
  color: #374151;
  margin: 0 0 var(--documentos-spacing-sm) 0;
}

.documentos-empty__message {
  font-size: 1rem;
  line-height: 1.5;
  margin: 0 0 var(--documentos-spacing-lg) 0;
}

.documentos-empty__actions {
  display: flex;
  justify-content: center;
  gap: var(--documentos-spacing-md);
  flex-wrap: wrap;
}

/* ================================
   RESPONSIVIDAD
   ================================ */
@media (max-width: 1024px) {
  .documentos-container {
    padding: var(--documentos-spacing-sm);
  }
  
  .documentos-grid[data-view="cartas"] {
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  }
}

@media (max-width: 768px) {
  .documentos-toolbar__row {
    flex-direction: column;
    align-items: stretch;
  }
  
  .documentos-search {
    min-width: unset;
  }
  
  .documentos-filters {
    justify-content: stretch;
  }
  
  .documentos-filters > * {
    flex: 1;
  }
  
  .documentos-grid[data-view="cartas"] {
    grid-template-columns: 1fr;
  }
  
  .documentos-advanced-filters {
    grid-template-columns: 1fr;
  }
  
  .documento-card[data-view="lista"] {
    flex-direction: column;
    align-items: stretch;
  }
  
  .documento-card[data-view="lista"] .documento-card__header {
    margin-bottom: var(--documentos-spacing-sm);
  }
  
  .documento-card[data-view="lista"] .documento-card__meta {
    justify-content: flex-start;
    flex-wrap: wrap;
  }
}
@media (max-width: 480px) {
  /* en pantallas muy pequeñas, mostrar selects debajo del campo de búsqueda y a ancho completo */
  .documentos-filters .ui-filters__select {
    width: 100% !important;
    min-width: 0 !important;
    display: block !important;
    margin-top: 8px;
  }
  .documentos-filters .ui-filters__form { flex-direction: column; align-items: stretch; }
}

@media (max-width: 480px) {
  .documentos-status {
    flex-direction: column;
    align-items: stretch;
    gap: var(--documentos-spacing-sm);
  }
  
  .documentos-status__info {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--documentos-spacing-xs);
  }
  
  .documentos-pagination {
    flex-wrap: wrap;
    gap: var(--documentos-spacing-xs);
  }
  
  .documentos-pagination__info {
    order: -1;
    width: 100%;
    text-align: center;
    margin: 0 0 var(--documentos-spacing-sm) 0;
  }
}

/* ================================
   UTILIDADES Y ANIMACIONES
   ================================ */
@keyframes documentos-fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes documentos-pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.documentos-loading .ui-spinner {
  animation: documentos-pulse 1.5s ease-in-out infinite;
}

.documento-card {
  animation: documentos-fadeIn 0.3s ease-out;
}

.documento-card[data-loading="true"] {
  opacity: 0.6;
  pointer-events: none;
}

/* Scrollbar personalizado para contenedores específicos */
.documentos-content::-webkit-scrollbar,
.documentos-metadata::-webkit-scrollbar {
  width: 8px;
}

.documentos-content::-webkit-scrollbar-track,
.documentos-metadata::-webkit-scrollbar-track {
  background: #f1f5f9;
  border-radius: 4px;
}

.documentos-content::-webkit-scrollbar-thumb,
.documentos-metadata::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 4px;
}

.documentos-content::-webkit-scrollbar-thumb:hover,
.documentos-metadata::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}

/* Estados de focus accesibles */
.documento-card:focus-visible {
  outline: 2px solid var(--documentos-color-primary);
  outline-offset: 2px;
}

.documentos-dropzone:focus-within {
  border-color: var(--documentos-color-primary);
  box-shadow: 0 0 0 3px rgb(37 99 235 / 0.1);
}

/* Print styles */
@media print {
  .documentos-toolbar,
  .documentos-pagination,
  .documento-card__actions {
    display: none !important;
  }
  
  .documento-card {
    break-inside: avoid;
    box-shadow: none;
    border: 1px solid #000;
  }
}

/* ================================
   MODALES - centrado y ajustes
   ================================ */
.ui-modal-overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(2,6,23,0.45);padding:1rem;z-index:1000}
.ui-modal{max-width:900px;width:min(100%, 900px);max-height:90vh;overflow:auto;border-radius:12px;box-shadow:0 20px 40px rgba(0,0,0,.2)}
.ui-modal__header{position:sticky;top:0;background:var(--ui-color-fondo-alt,#fff)}
.ui-modal__actions{display:flex;gap:.5rem;justify-content:flex-end;flex-wrap:wrap}

/* Acciones superiores (Subir/Refrescar) separadas y no amontonadas */
.ui-actions{display:flex;gap:var(--ui-gap-6);align-items:center;flex-wrap:wrap}
.documentos-filters .ui-actions{margin-left:auto}
.ui-actions .ui-button{white-space:nowrap}